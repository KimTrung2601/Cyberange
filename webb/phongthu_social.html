<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ph√≤ng th·ªß Social Engineering ‚Äì Cyber Range</title>

    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        :root {
            --bg-dark: #0f1624;
            --bg-card: #1a2332;
            --blue: #3fa9f5;
            --text: #e6eef7;
            --muted: #98a6b8;
            --orange: #f5b041;
            --red: #e74c3c;
            --border-light: #2c3a4d;
        }

        body {
            background: var(--bg-dark);
            margin: 0;
            font-family: "Segoe UI", sans-serif;
        }

        .app { display: flex; min-height: 100vh; }

        .sidebar {
            min-width: 280px;
            background: #131b29;
            border-right: 1px solid #243044;
            padding: 24px;
            height: 100vh;
            position: sticky;
            top: 0;
            overflow-y: auto;
        }

        .sidebar-logo { display: flex; align-items: center; gap: 10px; color: white; font-size: 20px; font-weight: bold; margin-bottom: 30px; }
        .sidebar-user { background: #1a2332; padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid var(--border-light); }

        .nav-item {
            padding: 10px 14px;
            display: block;
            border-radius: 6px;
            color: var(--muted);
            text-decoration: none;
            transition: 0.2s;
        }
        .nav-item:hover { background: #1f2a3b; color: white; }
        .nav-item.active { background: #1f2a3b; color: var(--blue); }

        .main { flex-grow: 1; }

        .main-topbar {
            background: #10141a;
            padding: 15px 30px;
            border-bottom: 1px solid var(--border-light);
        }

        .guide-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 25px;
            color: var(--text);
        }

        h2 {
            margin-top: 35px;
            font-size: 24px;
            color: var(--blue);
            border-bottom: 2px solid var(--border-light);
            padding-bottom: 8px;
        }

        h3 {
            margin-top: 20px;
            font-size: 19px;
            color: var(--text);
            font-weight: 700;
        }

        p, ul {
            font-size: 16px;
            line-height: 1.8;
            color: var(--muted);
            text-align: justify;
        }
        ul { padding-left: 22px; }

        .code-block {
            background:#131c27;
            border-left:5px solid var(--orange);
            padding:18px 20px;
            border-radius:10px;
            margin:25px 0;
            box-shadow:0 0 12px rgba(0,0,0,0.6);
            font-family:Consolas, monospace;
            color:#f6d76c;
            font-size:15px;
            white-space:pre-wrap;
        }

        .log-block {
            background:#1a2332;
            border-left:5px solid var(--red);
            padding:18px 20px;
            border-radius:10px;
            margin:25px 0;
            box-shadow:0 0 12px rgba(231,76,60,0.4);
            font-family:Consolas, monospace;
            color:#ffb3b3;
            font-size:15px;
            white-space:pre-wrap;
        }

        .quiz-container {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 12px;
            margin-top: 25px;
            border: 1px solid var(--border-light);
            box-shadow: 0 0 12px rgba(63,169,245,0.25);
        }

        .option-group { margin-top: 12px; }
        .option-item {
            display:block;
            margin:10px 0;
            line-height:1.6;
            cursor:pointer;
            color: var(--muted);
        }
        .option-item input {
            margin-right:10px;
        }

        .quiz-button {
            margin-top:12px;
            padding: 10px 20px;
            background: #27ae60;
            color: white;
            border-radius: 6px;
            cursor: pointer;
            border: none;
            font-weight: bold;
        }
        .quiz-feedback { margin-top:10px; font-weight:600; }
    </style>
</head>

<body>

<div class="app">

    <aside class="sidebar">
       <header class="sidebar-logo">
            <i class="fas fa-shield-alt"></i>
            <span>CYBER<br>RANGES</span>
        </header>

        <nav class="sidebar-nav">
            <a href="#" onclick="history.back(); return false;" class="nav-item active">
                <i class="fas fa-arrow-left"></i> Back to Playlists
            </a>

            <h3 style="color:white; margin-top:20px;">N·ªôi dung b√†i h·ªçc</h3>
            <a class="nav-item" href="#tong-quan">1. T·ªïng quan k·ªπ thu·∫≠t</a>
            <a class="nav-item" href="#phong-thu-phishing">2. Ch·ªëng l·ª´a ƒë·∫£o (Phishing)</a>
            <a class="nav-item" href="#phong-thu-malware">3. Ch·∫∑n ƒë·ª©ng Malware</a>
            <a class="nav-item" href="#quiz">4. ƒê√°nh gi√° k·∫øt qu·∫£</a>
        </nav>
    </aside>

    <main class="main">

        <header class="main-topbar">
            <h1 style="color:white; margin:0;font-size:26px;">
                <i class="fas fa-shield-alt" style="color:var(--blue); margin-right:10px;"></i>
                H∆∞·ªõng d·∫´n l√Ω thuy·∫øt: Ph√≤ng th·ªß Social Engineering
            </h1>
        </header>

        <section class="guide-container">

            <h2 id="tong-quan">üìå 1. T·ªïng quan chi·∫øn l∆∞·ª£c ph√≤ng th·ªß</h2>
            <p>
                T·∫•n c√¥ng ng∆∞·ªùi d√πng (Social Engineering) khai th√°c y·∫øu t·ªë t√¢m l√Ω ƒë·ªÉ v∆∞·ª£t qua c√°c r√†o c·∫£n c√¥ng ngh·ªá. M·ªôt h·ªá th·ªëng ph√≤ng th·ªß v·ªØng ch·∫Øc ph·∫£i bao g·ªìm s·ª± k·∫øt h·ª£p gi·ªØa ki·∫øn th·ª©c nh·∫≠n di·ªán c·ªßa con ng∆∞·ªùi v√† c√°c c·∫•u h√¨nh k·ªπ thu·∫≠t nghi√™m ng·∫∑t nh·∫±m m·ª•c ti√™u: NgƒÉn ch·∫∑n ƒë√°nh c·∫Øp th√¥ng tin v√† v√¥ hi·ªáu h√≥a c√°c k·∫øt n·ªëi ƒëi·ªÅu khi·ªÉn tr√°i ph√©p.
            </p>

            <h2 id="phong-thu-phishing">üõ°Ô∏è 2. Ph√≤ng th·ªß t·∫•n c√¥ng l·ª´a ƒë·∫£o (Phishing Defense)</h2>
            <p>
                Hacker th∆∞·ªùng s·ª≠ d·ª•ng c√¥ng c·ª• (nh∆∞ SET) ƒë·ªÉ sao ch√©p giao di·ªán c√°c trang web n·ªïi ti·∫øng. Ng∆∞·ªùi d√πng c·∫ßn √°p d·ª•ng c√°c c∆° ch·∫ø x√°c th·ª±c v√† ki·ªÉm tra ƒëa t·∫ßng.
            </p>

            <h3>2.1. X√°c th·ª±c ƒëa y·∫øu t·ªë (MFA)</h3>
            <p>
                MFA l√† ch·ªët ch·∫∑n quan tr·ªçng nh·∫•t. Ngay c·∫£ khi m·∫≠t kh·∫©u b·ªã l·ªô qua c√°c trang ƒëƒÉng nh·∫≠p gi·∫£ m·∫°o, hacker v·∫´n kh√¥ng th·ªÉ truy c·∫≠p t√†i kho·∫£n n·∫øu kh√¥ng c√≥ y·∫øu t·ªë x√°c th·ª±c th·ª© hai (m√£ OTP, SMS, ho·∫∑c Token b·∫£o m·∫≠t). ƒêi·ªÅu n√†y l√†m gi·∫£m 99% r·ªßi ro t·ª´ c√°c cu·ªôc t·∫•n c√¥ng chi·∫øm quy·ªÅn t√†i kho·∫£n.
            </p>
            

            <h3>2.2. Nh·∫≠n di·ªán d·∫•u hi·ªáu trang gi·∫£ m·∫°o</h3>
            <ul>
                <li><strong style="color:var(--blue);">Ki·ªÉm tra URL:</strong> Lu√¥n quan s√°t thanh ƒë·ªãa ch·ªâ. Hacker th∆∞·ªùng d√πng IP tr·ª±c ti·∫øp ho·∫∑c c√°c t√™n mi·ªÅn c√≥ k√Ω t·ª± g√¢y nh·∫ßm l·∫´n (v√≠ d·ª•: g00gle.com thay v√¨ google.com).</li>
                <li><strong style="color:var(--blue);">Tr√¨nh tr·∫°ng HTTPS:</strong> C√°c trang l·ª´a ƒë·∫£o th∆∞·ªùng thi·∫øu ch·ª©ng ch·ªâ b·∫£o m·∫≠t ho·∫∑c b·ªã tr√¨nh duy·ªát c·∫£nh b√°o "Not Secure".</li>
            </ul>

            <h2 id="phong-thu-malware">‚öôÔ∏è 3. NgƒÉn ch·∫∑n m√£ ƒë·ªôc v√† Reverse Shell</h2>
            <p>
                Khi ng∆∞·ªùi d√πng l·ª° t·∫£i v√† th·ª±c thi Payload (t·ªáp ƒë·ªôc h·∫°i), hacker s·∫Ω c·ªë g·∫Øng chi·∫øm quy·ªÅn ƒëi·ªÅu khi·ªÉn qua k·∫øt n·ªëi ng∆∞·ª£c (Reverse Shell).
            </p>

            <h3>3.1. C·∫•u h√¨nh T∆∞·ªùng l·ª≠a Outbound</h3>
            <p>
                H·∫ßu h·∫øt c√°c m√£ ƒë·ªôc s·ª≠ d·ª•ng c·ªïng kh√¥ng ti√™u chu·∫©n (nh∆∞ 4444, 5555) ƒë·ªÉ g·ª≠i t√≠n hi·ªáu v·ªÅ m√°y hacker. C·∫•u h√¨nh t∆∞·ªùng l·ª≠a ch·∫∑n c√°c c·ªïng n√†y s·∫Ω l√†m t√™ li·ªát kh·∫£ nƒÉng ƒëi·ªÅu khi·ªÉn c·ªßa m√£ ƒë·ªôc.
            </p>

            <div class="code-block">
# Quy t·∫Øc ngƒÉn ch·∫∑n chi·∫øm quy·ªÅn ƒëi·ªÅu khi·ªÉn:
- H√†nh ƒë·ªông: DENY (T·ª´ ch·ªëi)
- H∆∞·ªõng: Outbound (K·∫øt n·ªëi ƒëi ra)
- C√°c c·ªïng ph·ªï bi·∫øn c·∫ßn ch·∫∑n: 4444, 8888, 5555
- Ch·ªâ cho ph√©p c√°c c·ªïng chu·∫©n: 80, 443 (Web) v√† 53 (DNS)
            </div>

            <h3>3.2. Gi√°m s√°t thi·∫øt b·ªã ƒë·∫ßu cu·ªëi (Endpoint Protection)</h3>
            <p>
                S·ª≠ d·ª•ng c√°c gi·∫£i ph√°p nh∆∞ Windows Defender ho·∫∑c EDR ƒë·ªÉ qu√©t v√† ph√°t hi·ªán c√°c t·ªáp tin c√≥ ch·ªØ k√Ω s·ªë l·∫° ho·∫∑c h√†nh vi can thi·ªáp v√†o b·ªô nh·ªõ. H·ªá th·ªëng s·∫Ω ghi nh·∫≠n log v√† th·ª±c hi·ªán c√°ch ly ngay khi ph√°t hi·ªán m·ªëi ƒëe d·ªça.
            </p>

            <div class="log-block">
%SECURITY_ALERT: Detected malicious behavior from 'payload.exe'.
%FIREWALL_LOG: Connection attempt to 192.168.1.105 on port 4444 was BLOCKED.
‚Üí K·∫øt n·ªëi ng∆∞·ª£c c·ªßa hacker ƒë√£ b·ªã ch·∫∑n ƒë·ª©ng ho√†n to√†n.
            </div>

            <h2 id="quiz">üìù 4. Quiz ki·ªÉm tra ki·∫øn th·ª©c</h2>

            <div class="quiz-container">
                <div id="completion-message" style="display:none; padding:20px; background:#27ae60; color:white; border-radius:8px; text-align:center; font-size:18px; font-weight:700;">
                    <i class="fas fa-check-circle"></i> CH√öC M·ª™NG! B·∫†N ƒê√É HO√ÄN TH√ÄNH B√ÄI H·ªåC PH√íNG TH·ª¶!
                </div>

                <div id="question-1" class="question-block">
                    <h3>1. Bi·ªán ph√°p n√†o gi√∫p t√†i kho·∫£n an to√†n ngay c·∫£ khi m·∫≠t kh·∫©u ƒë√£ b·ªã hacker thu th·∫≠p?</h3>
                    <div class="option-group">
                        <label class="option-item"><input type="radio" name="q1" value="A"> A. ƒê·ªïi m·∫≠t kh·∫©u ƒë·ªãnh k·ª≥</label>
                        <label class="option-item"><input type="radio" name="q1" value="B"> B. S·ª≠ d·ª•ng X√°c th·ª±c ƒëa y·∫øu t·ªë (MFA)</label>
                        <label class="option-item"><input type="radio" name="q1" value="C"> C. ·∫®n ƒë·ªãa ch·ªâ IP</label>
                        <label class="option-item"><input type="radio" name="q1" value="D"> D. T·∫Øt th√¥ng b√°o tr√¨nh duy·ªát</label>
                    </div>
                    <button class="quiz-button" onclick="checkAnswer(1)">Ki·ªÉm tra</button>
                    <p id="feedback-1" class="quiz-feedback"></p>
                </div>

                <div id="question-2" class="question-block" style="display:none;">
                    <h3>2. T·∫°i sao c·∫•u h√¨nh ch·∫∑n c·ªïng Outbound (ƒëi ra) l·∫°i c·ª±c k·ª≥ quan tr·ªçng?</h3>
                    <div class="option-group">
                        <label class="option-item"><input type="radio" name="q2" value="A"> A. ƒê·ªÉ m√°y t√≠nh duy·ªát web nhanh h∆°n</label>
                        <label class="option-item"><input type="radio" name="q2" value="B"> B. ƒê·ªÉ ngƒÉn ch·∫∑n m√£ ƒë·ªôc th·ª±c hi·ªán k·∫øt n·ªëi ng∆∞·ª£c (Reverse Shell) v·ªÅ hacker</label>
                        <label class="option-item"><input type="radio" name="q2" value="C"> C. ƒê·ªÉ h·∫°n ch·∫ø ng∆∞·ªùi d√πng t·∫£i phim</label>
                        <label class="option-item"><input type="radio" name="q2" value="D"> D. ƒê·ªÉ ch·∫∑n qu·∫£ng c√°o tr√™n trang web</label>
                    </div>
                    <button class="quiz-button" onclick="checkAnswer(2)">Ki·ªÉm tra</button>
                    <p id="feedback-2" class="quiz-feedback"></p>
                </div>

                <div id="question-3" class="question-block" style="display:none;">
                    <h3>3. D·∫•u hi·ªáu n√†o d·ªÖ nh·∫≠n th·∫•y nh·∫•t c·ªßa m·ªôt trang Phishing trong th·ª±c nghi·ªám?</h3>
                    <div class="option-group">
                        <label class="option-item"><input type="radio" name="q3" value="A"> A. Trang web kh√¥ng c√≥ thanh cu·ªôn</label>
                        <label class="option-item"><input type="radio" name="q3" value="B"> B. URL hi·ªÉn th·ªã ƒë·ªãa ch·ªâ IP l·∫° v√† tr√¨nh duy·ªát c·∫£nh b√°o "Not Secure"</label>
                        <label class="option-item"><input type="radio" name="q3" value="C"> C. Trang web b·∫Øt ng∆∞·ªùi d√πng ƒëƒÉng k√Ω t√†i kho·∫£n</label>
                        <label class="option-item"><input type="radio" name="q3" value="D"> D. Trang web c√≥ qu√° nhi·ªÅu h√¨nh ·∫£nh</label>
                    </div>
                    <button class="quiz-button" onclick="checkAnswer(3)">Ki·ªÉm tra</button>
                    <p id="feedback-3" class="quiz-feedback"></p>
                </div>
            </div>

        </section>

        <div style="margin-top:60px; border-top:1px solid var(--border-light); padding-top:20px; text-align:center; color:var(--muted);">
            ¬© 2025 Cyber Ranges Platform - ƒê√†o t·∫°o An to√†n th√¥ng tin
        </div>
    </main>

</div>
<script>
    const correctAnswers = { 1:"B", 2:"B", 3:"B", 4:"A", 5:"B" };

    async function submitProgress(percent) {
        const username = localStorage.getItem("cyber_current_user");
        if (!username) return;

        try {
            const response = await fetch('/api/submit-quiz', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    username: username,
                    labId: 'phongthu_soc',
                    progress: percent
                })
            });
            await response.json();
        } catch (e) {
            console.error("L·ªói k·∫øt n·ªëi Server:", e);
        }
    }

    function getSelectedOption(questionNumber) {
        const checked = document.querySelector(`input[name="q${questionNumber}"]:checked`);
        return checked ? checked.value : "";
    }

    function lockQuestion(questionNumber) {
        document.querySelectorAll(`input[name="q${questionNumber}"]`).forEach(r => r.disabled = true);
        const qEl = document.getElementById('question-' + questionNumber);
        if (qEl) {
            const btn = qEl.querySelector('.quiz-button');
            if (btn) btn.disabled = true;
        }
    }

    function checkAnswer(questionNumber) {
        const feedbackEl = document.getElementById('feedback-' + questionNumber);
        const currentEl = document.getElementById('question-' + questionNumber);

        const userChoice = getSelectedOption(questionNumber);
        if (!userChoice) {
            feedbackEl.style.color = '#e67e22';
            feedbackEl.innerHTML = '‚ö†Ô∏è B·∫°n h√£y ch·ªçn A/B/C/D tr∆∞·ªõc khi Check!';
            return;
        }

        const isCorrect = (userChoice === correctAnswers[questionNumber]);

        if (isCorrect) {
            feedbackEl.style.color = '#2ecc71';
            feedbackEl.innerHTML = '<i class="fas fa-check"></i> Ch√≠nh x√°c!';
            lockQuestion(questionNumber);

            const percent = questionNumber * 20;
            submitProgress(percent);

            setTimeout(() => {
                currentEl.style.display = 'none';
                if (questionNumber < 5) {
                    const nextEl = document.getElementById('question-' + (questionNumber + 1));
                    if (nextEl) nextEl.style.display = 'block';
                } else {
                    document.getElementById('completion-message').style.display = 'block';
                    document.getElementById('quiz').scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }, 600);
        } else {
            feedbackEl.style.color = '#e74c3c';
            feedbackEl.innerHTML = '<i class="fas fa-times"></i> Ch∆∞a ch√≠nh x√°c. Vui l√≤ng th·ª≠ l·∫°i!';
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('.question-block').forEach(q => q.style.display = 'none');
        const first = document.getElementById('question-1');
        if (first) first.style.display = 'block';
    });
</script>
